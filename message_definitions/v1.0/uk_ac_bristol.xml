<?xml version="1.0"?>
<mavlink>
  <!-- Message definitions from the University of Bristol Flight lab -->
  <!-- bristol.ac.uk/aerodynamics-research/research-projects/bif/    -->
  <!-- mavlink ID range: 15000 - 15099                               -->
  <enums>
      <enum name="TRAJECTORY_RESPONSE">
        <description>Response codes for TRAJECTORY_ACK</description>
        <entry name="TRAJECTORY_ACCEPTED">
          <description>Trajectory accepted OK</description>
        </entry>
        <entry name="TRAJECTORY_ERROR">
          <description>Error in trajectory transfer</description>
        </entry>
    </enum>
    <enum name="MAV_CMD">
      <description>UoB Extensions to MAV_CMD. Commands to be executed by the MAV. They can be executed on user request, or as part of a mission script.</description>
          <entry value="87" name="MAV_CMD_DO_TRAJECTORY">
            <description>Execute a pre-loaded trajectory</description>
            <param index="1">Empty</param>
            <param index="2">Empty</param>
            <param index="3">Empty</param>
            <param index="4">Empty</param>
            <param index="5">Empty</param>
            <param index="6">Empty</param>
            <param index="7">Empty</param>
          </entry>
      </enum>
  </enums>
  <messages>
    <message id="15000" name="TRAJECTORY_ITEM">
      <description>Message encoding a trajectory item. This message is emitted to announce the presence of a trajectory item and to set a trajectory item on the system. </description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="target_component">Component ID</field>
      <field type="uint16_t" name="seq">Sequence</field>
      <field type="uint16_t" name="time_ms">Time MS</field>
      <field type="uint16_t" name="elevator">Elevator (PWM)</field>
      <field type="uint16_t" name="sweep">Sweep (PWM)</field>
      <field type="int32_t" name="pitch">Pitch Angle (centi-degrees)</field>
      <field type="int32_t" name="pitchrate">Pitch Rate (centi-degrees/s)</field>
      <field type="float" name="airspeed">Airspeed (m/s)</field>
      <field type="float" name="height">Height (m)</field>
      <field type="float" name="distance">Distance (m)</field>
    </message>
    <message id="15001" name="TRAJECTORY_REQUEST_LIST">
        <description>Request the overall list of trajectory items.</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
    </message>
    <message id="15002" name="TRAJECTORY_CLEAR_ALL">
        <description>Clear the list of trajectory items</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
    </message>
    <message id="15003" name="TRAJECTORY_COUNT">
        <description>Initiate trajectory write or get count of trajectory items in response to TRAJECTORY_REQUEST_LIST</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
        <field type="uint16_t" name="count">Count</field>
    </message>
    <message id="15004" name="TRAJECTORY_REQUEST">
        <description>Request the trajectory item with sequence number seq.</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
        <field type="uint16_t" name="seq">Sequence</field>
    </message>
    <message id="15005" name="TRAJECTORY_ACK">
        <description>ACK message used during trajectory item handling</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
        <field type="uint8_t" name="response">Response (See TRAJECTORY_RESPONSE enum)</field>
    </message>
    <message id="15006" name="MLAGENT_STATE">
        <description>ACK message used during trajectory item handling</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
        <field type="float" name="x">X position</field>
        <field type="float" name="y">Y position</field>
        <field type="float" name="z">Z position</field>
        <field type="float" name="phi">Roll angle</field>
        <field type="float" name="theta">Pitch angle</field>
        <field type="float" name="psi">Yaw angle</field>
        <field type="float" name="u">U velocity</field>
        <field type="float" name="v">V velocity</field>
        <field type="float" name="w">W velocity</field>
        <field type="float" name="p">Roll rate</field>
        <field type="float" name="q">Pitch rate</field>
        <field type="float" name="r">Yaw rate</field>
        <field type="float" name="sweep">Sweep angle</field>
        <field type="float" name="elevator">Elevator angle</field>
        <field type="float" name="tip">Tip angle</field>
    </message>
    <message id="15007" name="MLAGENT_ACTION">
        <description>ACK message used during trajectory item handling</description>
        <field type="uint8_t" name="target_system">System ID</field>
        <field type="uint8_t" name="target_component">Component ID</field>
        <field type="float" name="sweep">Sweep rate</field>
        <field type="float" name="elevator">Elevator rate</field>
    </message>
  </messages>
</mavlink>
